create table estado(
idestado int not null primary key,
nombre varchar(30));

create table usuario(
nickname varchar(20) not null primary key,
contrasena varchar(50),
nombre varchar(20),
apaterno varchar(20),
amaterno varchar(20));

create table administrador(
curp varchar(20) not null primary key,
contrasena varchar(50),
nombre varchar(20),
apaterno varchar(20),
amaterno varchar(20));

create table pueblomagico(
idpm int not null primary key,
nombre varchar(20),
coordenadas varchar(30),
idestado int,
curp varchar(20),
foreign key(idestado) references estado(idestado) on delete cascade on update cascade,
foreign key(curp) references administrador(curp) on delete cascade on update cascade);

create table lugar(
idlugar int not null primary key,
nombre varchar(20),
idpm int,
foreign key(idpm) references pueblomagico(idpm) on delete cascade on update cascade);

create table fotoslugar(
idlugar int not null,
foto varchar(30) not null,
primary key(idlugar, foto),
foreign key(idlugar) references lugar(idlugar) on delete cascade on update cascade);

create table resena(
idresena int not null primary key,
nickname varchar(20) unique,
idpm int,
curp varchar(20),
calificacion int,
comentario varchar(200),
aprovada int,
foreign key(nickname) references usuario(nickname) on delete cascade on update cascade,
foreign key(idpm) references pueblomagico(idpm) on delete cascade on update cascade,
foreign key(curp) references administrador(curp) on delete cascade on update cascade);